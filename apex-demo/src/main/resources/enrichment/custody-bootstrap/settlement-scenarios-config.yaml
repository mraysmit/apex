# APEX Settlement Scenarios Configuration
# External data source configuration for settlement scenarios processing
# Replaces hardcoded settlement scenarios from CustodyAutoRepairBootstrap

type: "apex-enrichment-config"
name: "Settlement Scenarios Configuration"
  version: "2.0.0"
  description: "Data-driven settlement scenarios configuration for custody auto-repair processing"
  type: "external-data-config"
  author: "Mark Andrew Ray-Smith Cityline Ltd"
  created-date: "2025-09-01"
  domain: "Custody and Safekeeping"
  tags: ["settlement-scenarios", "custody", "auto-repair", "external-data"]

# Settlement scenarios configuration by scenario type
data:
  standard-settlement-scenarios:
    scenario-type: "standard-settlement-scenarios"
    scenario-name: "Standard Settlement Scenarios"
    description: "Standard settlement scenarios for custody operations"
    scenario-parameters:
      complexity-level: "standard"
      auto-repair-eligible: true
      manual-review-required: false
    settlement-scenarios:
      complete-instruction-scenario:
        scenario-id: "SCENARIO_1"
        scenario-name: "Complete Settlement Instruction"
        scenario-description: "Standard settlement with all required fields present"
        settlement-instruction:
          instruction-id: "SI_20250730_001"
          client-id: "CLIENT_PREMIUM_ASIA_001"
          client-name: "Premium Asset Management Asia Ltd"
          client-tier: "PREMIUM"
          market: "JAPAN"
          instrument-type: "EQUITY"
          instrument-name: "Toyota Motor Corporation"
          isin: "JP3633400001"
          settlement-amount: 10000000
          settlement-currency: "JPY"
          settlement-date: "T+2"
          counterparty-id: "CP_PREMIUM_GLOBAL_CUSTODY"
          custodian-id: "CUST_PREMIUM_GLOBAL"
          business-unit: "ASIA_PACIFIC_CUSTODY"
          risk-category: "STANDARD"
        expected-outcome:
          auto-repair-required: false
          processing-status: "STRAIGHT_THROUGH"
          repair-actions: []
          
      partial-instruction-scenario:
        scenario-id: "SCENARIO_2"
        scenario-name: "Partial Settlement Instruction"
        scenario-description: "Settlement with some missing fields requiring auto-repair"
        settlement-instruction:
          instruction-id: "SI_20250730_002"
          client-id: "CLIENT_STANDARD_ASIA_002"
          client-name: "Standard Asset Management"
          client-tier: "STANDARD"
          market: "HONG_KONG"
          instrument-type: "EQUITY"
          instrument-name: "HSBC Holdings PLC"
          isin: "GB0005405286"
          settlement-amount: 5000000
          settlement-currency: "HKD"
          settlement-date: "T+2"
          counterparty-id: null  # Missing field
          custodian-id: null     # Missing field
          business-unit: "ASIA_PACIFIC_CUSTODY"
          risk-category: "STANDARD"
          missing-fields: ["counterpartyId", "custodianId"]
        expected-outcome:
          auto-repair-required: true
          processing-status: "AUTO_REPAIR"
          repair-actions: ["APPLY_MARKET_SI", "APPLY_CLIENT_SI"]
    scenario-settings:
      timeout-ms: 5000
      parallel-processing: true
      audit-enabled: true
    
  missing-field-scenarios:
    scenario-type: "missing-field-scenarios"
    scenario-name: "Missing Field Scenarios"
    description: "Settlement scenarios with missing critical fields"
    scenario-parameters:
      complexity-level: "medium"
      auto-repair-eligible: true
      manual-review-required: false
    settlement-scenarios:
      missing-counterparty-scenario:
        scenario-id: "SCENARIO_3"
        scenario-name: "Missing Counterparty Information"
        scenario-description: "Settlement with missing counterparty requiring auto-repair"
        settlement-instruction:
          instruction-id: "SI_20250730_003"
          client-id: "CLIENT_INSTITUTIONAL_003"
          client-name: "Institutional Investment Partners"
          client-tier: "INSTITUTIONAL"
          market: "SINGAPORE"
          instrument-type: "FIXED_INCOME"
          instrument-name: "Singapore Government Bond"
          isin: "SG1234567890"
          settlement-amount: 15000000
          settlement-currency: "SGD"
          settlement-date: "T+1"
          counterparty-id: null  # Missing field
          custodian-id: "CUST_SG_STANDARD"
          business-unit: "ASIA_PACIFIC_CUSTODY"
          risk-category: "LOW"
          missing-fields: ["counterpartyId"]
        expected-outcome:
          auto-repair-required: true
          processing-status: "AUTO_REPAIR"
          repair-actions: ["APPLY_MARKET_SI"]
          
      missing-custodian-scenario:
        scenario-id: "SCENARIO_4"
        scenario-name: "Missing Custodian Information"
        scenario-description: "Settlement with missing custodian requiring auto-repair"
        settlement-instruction:
          instruction-id: "SI_20250730_004"
          client-id: "CLIENT_PREMIUM_ASIA_001"
          client-name: "Premium Asset Management Asia Ltd"
          client-tier: "PREMIUM"
          market: "KOREA"
          instrument-type: "EQUITY"
          instrument-name: "Samsung Electronics"
          isin: "KR7005930003"
          settlement-amount: 8000000
          settlement-currency: "KRW"
          settlement-date: "T+2"
          counterparty-id: "CP_KR_STANDARD"
          custodian-id: null     # Missing field
          business-unit: "ASIA_PACIFIC_CUSTODY"
          risk-category: "STANDARD"
          missing-fields: ["custodianId"]
        expected-outcome:
          auto-repair-required: true
          processing-status: "AUTO_REPAIR"
          repair-actions: ["APPLY_CLIENT_SI", "APPLY_MARKET_SI"]
    scenario-settings:
      timeout-ms: 7000
      parallel-processing: false
      audit-enabled: true
    
  high-value-transaction-scenarios:
    scenario-type: "high-value-transaction-scenarios"
    scenario-name: "High-Value Transaction Scenarios"
    description: "High-value settlement scenarios requiring special handling"
    scenario-parameters:
      complexity-level: "high"
      auto-repair-eligible: false
      manual-review-required: true
    settlement-scenarios:
      high-value-exception-scenario:
        scenario-id: "SCENARIO_5"
        scenario-name: "High-Value Transaction Exception"
        scenario-description: "High-value transaction requiring manual review"
        settlement-instruction:
          instruction-id: "SI_20250730_005"
          client-id: "CLIENT_PREMIUM_ASIA_001"
          client-name: "Premium Asset Management Asia Ltd"
          client-tier: "PREMIUM"
          market: "JAPAN"
          instrument-type: "EQUITY"
          instrument-name: "SoftBank Group Corp"
          isin: "JP3436100006"
          settlement-amount: 50000000  # High value - $50M
          settlement-currency: "JPY"
          settlement-date: "T+2"
          counterparty-id: null  # Missing field
          custodian-id: "CUST_PREMIUM_GLOBAL"
          business-unit: "ASIA_PACIFIC_CUSTODY"
          risk-category: "HIGH"
          missing-fields: ["counterpartyId"]
          high-value-flag: true
        expected-outcome:
          auto-repair-required: false
          processing-status: "MANUAL_REVIEW"
          repair-actions: ["ESCALATE_TO_OPERATIONS"]
          
      ultra-high-value-scenario:
        scenario-id: "SCENARIO_6"
        scenario-name: "Ultra High-Value Transaction"
        scenario-description: "Ultra high-value transaction requiring enhanced controls"
        settlement-instruction:
          instruction-id: "SI_20250730_006"
          client-id: "CLIENT_INSTITUTIONAL_003"
          client-name: "Institutional Investment Partners"
          client-tier: "INSTITUTIONAL"
          market: "HONG_KONG"
          instrument-type: "EQUITY"
          instrument-name: "Tencent Holdings Ltd"
          isin: "KYG875721634"
          settlement-amount: 100000000  # Ultra high value - $100M
          settlement-currency: "HKD"
          settlement-date: "T+2"
          counterparty-id: "CP_HK_STANDARD"
          custodian-id: "CUST_HK_STANDARD"
          business-unit: "ASIA_PACIFIC_CUSTODY"
          risk-category: "HIGH"
          missing-fields: []
          high-value-flag: true
          ultra-high-value-flag: true
        expected-outcome:
          auto-repair-required: false
          processing-status: "ENHANCED_REVIEW"
          repair-actions: ["ESCALATE_TO_SENIOR_MANAGEMENT"]
    scenario-settings:
      timeout-ms: 10000
      parallel-processing: false
      audit-enabled: true
      enhanced-logging: true
    
  exception-handling-scenarios:
    scenario-type: "exception-handling-scenarios"
    scenario-name: "Exception Handling Scenarios"
    description: "Exception scenarios requiring specialized handling"
    scenario-parameters:
      complexity-level: "complex"
      auto-repair-eligible: "conditional"
      manual-review-required: "conditional"
    settlement-scenarios:
      cross-border-scenario:
        scenario-id: "SCENARIO_7"
        scenario-name: "Cross-Border Settlement"
        scenario-description: "Cross-border settlement with complex routing"
        settlement-instruction:
          instruction-id: "SI_20250730_007"
          client-id: "CLIENT_PREMIUM_ASIA_001"
          client-name: "Premium Asset Management Asia Ltd"
          client-tier: "PREMIUM"
          market: "JAPAN"
          instrument-type: "EQUITY"
          instrument-name: "Alibaba Group Holding Ltd"
          isin: "US01609W1027"
          settlement-amount: 25000000
          settlement-currency: "USD"
          settlement-date: "T+2"
          counterparty-id: "CP_GLOBAL_CUSTODY"
          custodian-id: "CUST_GLOBAL_NETWORK"
          business-unit: "GLOBAL_CUSTODY"
          risk-category: "MEDIUM"
          cross-border-flag: true
        expected-outcome:
          auto-repair-required: false
          processing-status: "SPECIALIZED_ROUTING"
          repair-actions: ["APPLY_CROSS_BORDER_RULES"]
    scenario-settings:
      timeout-ms: 15000
      parallel-processing: false
      audit-enabled: true
      specialized-handling: true
    
  default:
    scenario-type: "default"
    scenario-name: "Default Settlement Scenarios"
    description: "Default settlement processing"
    settlement-scenarios:
      default-scenario:
        scenario-id: "DEFAULT_SCENARIO"
        scenario-name: "Default Settlement"
        settlement-instruction:
          instruction-id: "SI_DEFAULT"
          client-id: "DEFAULT_CLIENT"
          market: "DEFAULT"
          instrument-type: "DEFAULT"
          settlement-amount: 1000000
          settlement-currency: "USD"
        expected-outcome:
          auto-repair-required: false
          processing-status: "DEFAULT"
    scenario-settings:
      timeout-ms: 2000

# Settlement processing algorithms
processing-algorithms:
  standard-settlement:
    algorithm-name: "Standard Settlement Processing"
    description: "Standard settlement processing algorithm"
    characteristics:
      - "Straight-through processing"
      - "Standard validation rules"
      - "Automated field completion"
    
  auto-repair-processing:
    algorithm-name: "Auto-Repair Processing"
    description: "Automated repair processing algorithm"
    characteristics:
      - "Missing field detection"
      - "Standing instruction matching"
      - "Automated field population"
    
  manual-review-processing:
    algorithm-name: "Manual Review Processing"
    description: "Manual review processing algorithm"
    characteristics:
      - "High-value transaction handling"
      - "Exception escalation"
      - "Enhanced audit trails"

# Quality assurance
quality-assurance:
  scenario-accuracy:
    - "Settlement scenarios must be realistic"
    - "Field mappings must be correct"
    - "Expected outcomes must be accurate"
    - "Processing logic must be sound"
    
  operational-efficiency:
    - "Scenarios must be operationally efficient"
    - "Auto-repair logic must be reliable"
    - "Manual review triggers must be appropriate"
    - "Exception handling must be comprehensive"
    
  risk-management:
    - "High-value thresholds must be appropriate"
    - "Risk categories must be accurate"
    - "Escalation procedures must be defined"
    - "Audit trails must be complete"

