# APEX Discount Rules Configuration
# External data source configuration for order discount rules
# Replaces hardcoded discount logic from RuleConfigurationHardcodedBootstrap

metadata:
  name: "Discount Rules"
  version: "1.0.0"
  description: "Data-driven discount rules for bootstrap demonstration"
  type: "external-data-config"
  author: "apex.demo.team@company.com"
  created-date: "2024-12-24"
  tags: ["apex-demo", "evaluation", "bootstrap", "discount-rules"]

# Discount rules by customer and order profile
data:
  large-order:
    rule-id: "OD001"
    discount-percentage: 15
    discount-reason: "Large order discount - 15% off orders over $1000"
    description: "Orders over $1000 qualify for large order discount"
    conditions:
      order-total-min: 1000
      customer-years-min: null
    priority: 10
    
  loyalty-customer:
    rule-id: "OD002"
    discount-percentage: 10
    discount-reason: "Loyalty discount - 10% off for customers over 5 years"
    description: "Customers with 5+ years qualify for loyalty discount"
    conditions:
      order-total-min: null
      customer-years-min: 5
    priority: 20
    
  new-customer:
    rule-id: "OD003"
    discount-percentage: 5
    discount-reason: "New customer discount - 5% welcome offer"
    description: "First-time customers (0 years) get welcome discount"
    conditions:
      order-total-min: null
      customer-years: 0
    priority: 30
    
  standard-customer:
    rule-id: "OD004"
    discount-percentage: 0
    discount-reason: "No discount applicable"
    description: "Standard customers with no special qualifications"
    conditions:
      order-total-max: 999.99
      customer-years-min: 1
      customer-years-max: 5
    priority: 40

# Detailed discount configurations
discount-details:
  OD001:
    name: "Large Order Discount"
    category: "volume-based"
    max-discount-amount: 500
    min-order-amount: 1000
    applicable-products: "all"
    stackable: false
    
  OD002:
    name: "Loyalty Customer Discount"
    category: "relationship-based"
    max-discount-amount: 200
    min-order-amount: 50
    applicable-products: "all"
    stackable: true
    
  OD003:
    name: "New Customer Welcome Discount"
    category: "acquisition-based"
    max-discount-amount: 100
    min-order-amount: 25
    applicable-products: "selected"
    stackable: true
    
  OD004:
    name: "Standard Processing"
    category: "default"
    max-discount-amount: 0
    min-order-amount: 0
    applicable-products: "none"
    stackable: false

# Business parameters
business-parameters:
  order-thresholds:
    large-order: 1000
    medium-order: 500
    small-order: 100
    
  customer-loyalty-tiers:
    new: 0
    bronze: 1
    silver: 3
    gold: 5
    platinum: 10
    
  discount-limits:
    maximum-percentage: 25
    maximum-amount: 1000
    minimum-order: 25
    
  seasonal-multipliers:
    holiday-season: 1.5
    back-to-school: 1.2
    summer-sale: 1.3
    regular: 1.0

# Discount calculation rules
calculation-rules:
  precedence:
    - "large-order"
    - "loyalty-customer"
    - "new-customer"
    - "standard-customer"
    
  stacking-rules:
    allowed-combinations:
      - ["loyalty-customer", "new-customer"]
    maximum-stacked-percentage: 20
    
  exclusions:
    - rule: "large-order"
      excludes: ["loyalty-customer", "new-customer"]
      reason: "Large order discount is exclusive"

# Promotional campaigns
promotional-campaigns:
  spring-promotion:
    active: true
    start-date: "2025-03-01"
    end-date: "2025-05-31"
    additional-discount: 5
    applicable-rules: ["OD001", "OD002"]
    
  new-customer-boost:
    active: true
    start-date: "2025-01-01"
    end-date: "2025-12-31"
    additional-discount: 3
    applicable-rules: ["OD003"]
    
  loyalty-appreciation:
    active: false
    start-date: "2025-06-01"
    end-date: "2025-08-31"
    additional-discount: 7
    applicable-rules: ["OD002"]

# Reporting and analytics
reporting:
  metrics:
    - "total-discounts-applied"
    - "average-discount-percentage"
    - "discount-by-rule-type"
    - "customer-acquisition-cost"
    - "customer-lifetime-value-impact"
    
  frequency: "daily"
  
  alerts:
    - condition: "daily-discount-total > 10000"
      action: "notify-finance-team"
    - condition: "discount-percentage > 20"
      action: "require-manager-approval"
