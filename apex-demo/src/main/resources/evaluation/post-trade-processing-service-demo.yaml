# APEX Post-Trade Processing Service Demo Configuration
# Real APEX YAML configuration for post-trade processing service
# Replaces all hardcoded post-trade processing logic from PostTradeProcessingServiceDemo (@version 1.0)

metadata:
  name: "Post-Trade Processing Service Demo"
  version: "1.0.0"
  description: "APEX-compliant post-trade processing service with real enrichment services"
  type: "rule-config"
  author: "apex.demo.team@company.com"
  created-date: "2024-12-24"
  tags: ["apex-demo", "evaluation", "post-trade-processing"]

# External data source for post-trade processing configurations
external-data-sources:
  - name: "trade-processing-workflows-config"
    type: "external-data-config"
    source: "evaluation/post-trade-processing/trade-processing-workflows-config.yaml"
    
  - name: "settlement-operations-config"
    type: "external-data-config"
    source: "evaluation/post-trade-processing/settlement-operations-config.yaml"
    
  - name: "post-trade-business-rules-config"
    type: "external-data-config"
    source: "evaluation/post-trade-processing/post-trade-business-rules-config.yaml"

# APEX enrichment processing for post-trade processing service
enrichments:
  - name: "trade-processing-workflows-processing"
    type: "lookup-enrichment"
    description: "Process trade processing workflows using data-driven configuration"
    condition: "#data.serviceType == 'trade-processing-workflows-processing'"
    lookup-source: "trade-processing-workflows-config"
    lookup-key: "#data.workflowType != null ? #data.workflowType : 'default'"
    target-field: "tradeProcessingWorkflowsResult"
    
  - name: "settlement-operations-processing"
    type: "lookup-enrichment"
    description: "Process settlement operations using data-driven configuration"
    condition: "#data.serviceType == 'settlement-operations-processing'"
    lookup-source: "settlement-operations-config"
    lookup-key: "#data.operationType != null ? #data.operationType : 'default'"
    target-field: "settlementOperationsResult"
    
  - name: "post-trade-business-rules-processing"
    type: "lookup-enrichment"
    description: "Process post-trade business rules using data-driven configuration"
    condition: "#data.serviceType == 'post-trade-business-rules-processing'"
    lookup-source: "post-trade-business-rules-config"
    lookup-key: "#data.ruleType != null ? #data.ruleType : 'default'"
    target-field: "postTradeBusinessRulesResult"
    
  - name: "post-trade-processing-service-summary"
    type: "expression-enrichment"
    description: "Generate post-trade processing service summary"
    condition: "true"
    expression: "'Post-trade processing service completed: ' + (#data.serviceType != null ? #data.serviceType : 'unknown') + ' using real APEX services'"
    target-field: "postTradeProcessingServiceSummary"

# Service processing categories
processing-categories:
  - category: "trade-processing-workflows-processing"
    description: "Trade processing workflows creation and management"
    processing-type: "real-apex-enrichment"
    workflow-types:
      - "Trade validation workflows"
      - "Trade matching workflows"
      - "Trade affirmation workflows"
      - "Trade settlement workflows"
    
  - category: "settlement-operations-processing"
    description: "Settlement operations processing"
    processing-type: "real-apex-enrichment"
    operation-types:
      - "Settlement method determination"
      - "Settlement fee calculation"
      - "Settlement day calculation"
      - "Settlement confirmation"
    
  - category: "post-trade-business-rules-processing"
    description: "Post-trade business rules processing"
    processing-type: "real-apex-enrichment"
    rule-aspects:
      - "Trade type validation rules"
      - "Settlement method rules"
      - "Fee calculation rules"
      - "Compliance validation rules"

# Post-trade processing patterns
post-trade-processing-patterns:
  trade-lifecycle-pattern:
    pattern-name: "Trade Lifecycle Processing"
    description: "Pattern for processing complete trade lifecycle"
    lifecycle-stages: ["VALIDATION", "MATCHING", "AFFIRMATION", "CONFIRMATION", "SETTLEMENT"]
    processing-flow:
      - "Trade validation and compliance checks"
      - "Trade matching with counterparty"
      - "Trade affirmation and agreement"
      - "Trade confirmation and finalization"
      - "Trade settlement and completion"
    
  settlement-method-pattern:
    pattern-name: "Settlement Method Determination"
    description: "Pattern for determining optimal settlement method"
    settlement-methods: ["DTC", "FEDWIRE", "EUROCLEAR", "CLEARSTREAM", "MANUAL"]
    selection-criteria:
      - "Trade type compatibility"
      - "Geographic considerations"
      - "Cost optimization"
      - "Speed requirements"
    
  fee-calculation-pattern:
    pattern-name: "Fee Calculation Processing"
    description: "Pattern for calculating settlement fees"
    fee-components: ["BASE_FEE", "VOLUME_FEE", "METHOD_FEE", "REGULATORY_FEE"]
    calculation-logic:
      - "Base fee determination by trade type"
      - "Volume-based fee scaling"
      - "Settlement method fee adjustment"
      - "Regulatory fee application"

# Trade type configurations
trade-type-configurations:
  equity-trades:
    trade-type: "Equity"
    processing-characteristics:
      settlement-days: 2
      base-fee: 15.0
      supported-methods: ["DTC", "FEDWIRE", "MANUAL"]
      validation-rules: ["EQUITY_VALIDATION", "MARKET_HOURS_CHECK"]
    
  fixed-income-trades:
    trade-type: "FixedIncome"
    processing-characteristics:
      settlement-days: 1
      base-fee: 25.0
      supported-methods: ["FEDWIRE", "EUROCLEAR", "CLEARSTREAM"]
      validation-rules: ["BOND_VALIDATION", "CREDIT_CHECK"]
    
  derivative-trades:
    trade-type: "Derivative"
    processing-characteristics:
      settlement-days: 1
      base-fee: 50.0
      supported-methods: ["DTC", "CLEARSTREAM", "MANUAL"]
      validation-rules: ["DERIVATIVE_VALIDATION", "MARGIN_CHECK"]
    
  forex-trades:
    trade-type: "Forex"
    processing-characteristics:
      settlement-days: 2
      base-fee: 10.0
      supported-methods: ["FEDWIRE", "MANUAL"]
      validation-rules: ["FOREX_VALIDATION", "CURRENCY_CHECK"]
    
  commodity-trades:
    trade-type: "Commodity"
    processing-characteristics:
      settlement-days: 3
      base-fee: 30.0
      supported-methods: ["CLEARSTREAM", "MANUAL"]
      validation-rules: ["COMMODITY_VALIDATION", "DELIVERY_CHECK"]

# Settlement method configurations
settlement-method-configurations:
  dtc-settlement:
    method-name: "DTC"
    method-characteristics:
      processing-fee: 5.0
      processing-days: 0
      supported-currencies: ["USD"]
      geographic-scope: "US"
    
  fedwire-settlement:
    method-name: "Fedwire"
    method-characteristics:
      processing-fee: 10.0
      processing-days: 0
      supported-currencies: ["USD"]
      geographic-scope: "US"
    
  euroclear-settlement:
    method-name: "Euroclear"
    method-characteristics:
      processing-fee: 15.0
      processing-days: 1
      supported-currencies: ["EUR", "GBP", "USD"]
      geographic-scope: "EUROPE"
    
  clearstream-settlement:
    method-name: "Clearstream"
    method-characteristics:
      processing-fee: 12.0
      processing-days: 1
      supported-currencies: ["EUR", "USD"]
      geographic-scope: "EUROPE"
    
  manual-settlement:
    method-name: "Manual"
    method-characteristics:
      processing-fee: 50.0
      processing-days: 5
      supported-currencies: ["ALL"]
      geographic-scope: "GLOBAL"

# Performance settings
performance-settings:
  trade-processing-workflows-processing:
    processing-timeout: 10000
    parallel-processing: true
    cache-results: true
    
  settlement-operations-processing:
    processing-timeout: 5000
    parallel-processing: true
    fee-optimization: true
    
  post-trade-business-rules-processing:
    processing-timeout: 8000
    parallel-processing: false
    rule-intensive: true

# Demonstration scenarios
demonstration-scenarios:
  comprehensive-post-trade-processing:
    scenario-name: "Comprehensive Post-Trade Processing"
    description: "Demonstrate comprehensive post-trade processing service"
    steps:
      - "Load post-trade processing configurations"
      - "Process trade processing workflows"
      - "Process settlement operations"
      - "Process post-trade business rules"
      - "Generate processing results"
    expected-outcome: "Successful comprehensive post-trade processing"
    
  trade-lifecycle-processing:
    scenario-name: "Trade Lifecycle Processing"
    description: "Demonstrate complete trade lifecycle processing"
    steps:
      - "Load trade lifecycle configurations"
      - "Process trade validation workflows"
      - "Process trade settlement workflows"
      - "Generate lifecycle results"
    expected-outcome: "Successful trade lifecycle processing"
    
  settlement-optimization:
    scenario-name: "Settlement Optimization"
    description: "Demonstrate settlement method optimization"
    steps:
      - "Load settlement optimization configurations"
      - "Process settlement method determination"
      - "Process settlement fee calculation"
      - "Generate optimization results"
    expected-outcome: "Successful settlement optimization"

# Post-trade processing service configuration
post-trade-processing-service:
  service-categories:
    category-type: "Post-Trade Processing Service Categories"
    description: "Categories for post-trade processing service operations"
    available-categories:
      - "Trade validation and compliance"
      - "Trade matching and affirmation"
      - "Settlement processing and confirmation"
      - "Fee calculation and optimization"
      - "Regulatory reporting and compliance"
    category-characteristics:
      - "End-to-end trade lifecycle management"
      - "Multi-method settlement support"
      - "Dynamic fee calculation"
      - "Regulatory compliance integration"

# Quality assurance
quality-assurance:
  service-reliability:
    - "Post-trade processing must be accurate"
    - "Settlement operations must be reliable"
    - "Business rules must be consistent"
    - "Performance must meet SLA requirements"
    
  processing-accuracy:
    - "Trade processing must be precise"
    - "Settlement calculations must be correct"
    - "Fee calculations must be accurate"
    - "Compliance checks must be comprehensive"
    
  operational-requirements:
    - "Processing time must be reasonable"
    - "System availability must be high"
    - "Error handling must be robust"
    - "Audit trails must be complete"

# Output configuration
output:
  include-input: true
  include-metadata: true
  format: "enhanced"
  service-summary: true
  performance-metrics: true
  workflow-details: true
  operation-details: true
  rule-analysis: true
