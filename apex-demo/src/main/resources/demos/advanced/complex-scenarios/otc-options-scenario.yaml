# ============================================================================
# OTC OPTIONS PROCESSING SCENARIO
# ============================================================================
#
# This scenario configuration defines the processing pipeline for OTC Options
# data types. It provides lightweight routing to the comprehensive OTC Options
# bootstrap configuration that contains the complete rule definitions.
#
# PURPOSE:
# - Associates OTC Options data types with their processing pipeline
# - Provides scenario-specific metadata and routing information
# - Enables data type-based automatic routing to appropriate rule configurations
# - Supports business domain organization and ownership tracking
#
# ARCHITECTURE:
# - Scenario files provide lightweight routing and metadata
# - Bootstrap files contain the complete rule definitions and datasets
# - This separation enables flexible scenario management and reuse
#
# ============================================================================

metadata:
  name: "OTC Options Processing Scenario"
  version: "1.0.0"
  description: "Associates OTC Options with existing rule configurations for validation, enrichment, and business rules"
  type: "scenario"
  business-domain: "Derivatives Trading"
  regulatory-scope: "EMIR, Dodd-Frank, MiFID II"
  owner: "derivatives.team@company.com"
  created-by: "Mark Andrew Ray-Smith Cityline Ltd"
  created: "2025-08-02"
  last-modified: "2025-08-02"
  compliance-reviewed: true
  compliance-reviewer: "compliance.derivatives@company.com"
  compliance-date: "2025-08-01"
  risk-approved: true
  risk-reviewer: "risk.derivatives@company.com"
  risk-date: "2025-08-01"

# ============================================================================
# SCENARIO CONFIGURATION
# ============================================================================

scenario:
  # Scenario identification
  scenario-id: "otc-options-standard"
  name: "OTC Options Standard Processing"
  description: "Standard validation and enrichment pipeline for OTC Options"
  
  # Data types handled by this scenario
  data-types:
    - "dev.mars.apex.demo.bootstrap.model.OtcOption"
    - "OtcOption"
    - "EquityOption"
    - "FxOption"
  
  # Business context
  business-domain: "Derivatives Trading"
  business-process: "Trade Validation and Enrichment"
  regulatory-requirements:
    - "EMIR Trade Reporting"
    - "Dodd-Frank Compliance"
    - "MiFID II Best Execution"
    - "Basel III Capital Requirements"
  
  # Rule configuration files to load for this scenario
  rule-configurations:
    - "demos/bootstrap/otc-options/bootstrap-config.yaml"
  
  # Processing settings
  processing:
    enabled: true
    priority: "high"
    timeout-ms: 5000
    retry-attempts: 3
    
  # Routing conditions (optional - used for complex routing logic)
  routing-conditions:
    - condition: "#data.class.simpleName == 'OtcOption'"
      description: "Route OTC Options by class name"
    - condition: "#data.productType == 'OPTION'"
      description: "Route by product type field"
    - condition: "#data.assetClass == 'EQUITY' || #data.assetClass == 'FX'"
      description: "Route equity and FX options"

# ============================================================================
# SCENARIO DEPENDENCIES
# ============================================================================

dependencies:
  # Required configuration files
  required-configs:
    - path: "demos/bootstrap/otc-options/bootstrap-config.yaml"
      description: "Complete OTC Options processing configuration"
      type: "bootstrap"
    
  # Optional configuration files
  optional-configs:
    - path: "demos/fundamentals/rules/derivatives-validation-rules.yaml"
      description: "Reusable derivatives validation rules"
      type: "rules"
      fallback-behavior: "continue"

# ============================================================================
# BUSINESS METADATA
# ============================================================================

business:
  # Ownership and responsibility
  owner: "derivatives.team@company.com"
  business-analyst: "ba.derivatives@company.com"
  technical-lead: "tech.derivatives@company.com"
  
  # Business context
  business-domain: "Derivatives Trading"
  business-process: "OTC Options Processing"
  business-criticality: "high"
  
  # Regulatory context
  regulatory-scope: "EMIR, Dodd-Frank, MiFID II"
  compliance-requirements:
    - requirement: "EMIR Trade Reporting"
      deadline: "T+1"
      criticality: "mandatory"
    - requirement: "Dodd-Frank Swap Data Repository"
      deadline: "T+1"
      criticality: "mandatory"
    - requirement: "MiFID II Transaction Reporting"
      deadline: "T+1"
      criticality: "mandatory"
  
  # SLA requirements
  sla:
    processing-time-target: "< 100ms"
    availability-target: "99.9%"
    error-rate-target: "< 0.1%"

# ============================================================================
# TECHNICAL METADATA
# ============================================================================

technical:
  # Performance characteristics
  performance:
    expected-volume: "10,000 trades/day"
    peak-volume: "50,000 trades/day"
    processing-time-p95: "50ms"
    processing-time-p99: "100ms"
  
  # Integration points
  integrations:
    - system: "Trading System"
      interface: "REST API"
      data-format: "JSON"
    - system: "Risk Management"
      interface: "Message Queue"
      data-format: "XML"
    - system: "Regulatory Reporting"
      interface: "File Transfer"
      data-format: "CSV"
  
  # Monitoring and alerting
  monitoring:
    metrics:
      - "processing.time"
      - "error.rate"
      - "throughput"
    alerts:
      - condition: "processing.time > 200ms"
        severity: "warning"
      - condition: "error.rate > 1%"
        severity: "critical"

# ============================================================================
# SCENARIO EXECUTION SETTINGS
# ============================================================================

execution:
  # Execution mode
  mode: "synchronous"
  
  # Error handling
  error-handling:
    strategy: "fail-fast"
    retry-policy:
      max-attempts: 3
      backoff-strategy: "exponential"
      initial-delay-ms: 100
    
  # Audit and logging
  audit:
    enabled: true
    log-level: "INFO"
    include-sensitive-data: false
    retention-days: 90
