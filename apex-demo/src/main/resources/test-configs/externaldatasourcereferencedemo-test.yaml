name: "External Data Source Reference Demo Configuration"
description: "APEX-compliant external data source reference processing with real business logic"
version: "1.0"

enrichments:
  - id: "external-data-source-setup"
    name: "external-data-source-setup"
    type: "calculation-enrichment"
    description: "Setup external data source configuration with infrastructure separation"
    condition: "#dataSourceType != null && #dataSourceScope != null"
    calculation-config:
      expression: "'External Data Source Setup: ' + #dataSourceType + ' with scope ' + #dataSourceScope + ' (Configured: ' + T(java.time.LocalDateTime).now().toString() + ')'"
      result-field: "externalDataSourceSetupResult"
    field-mappings:
      - source-field: "externalDataSourceSetupResult"
        target-field: "externalDataSourceSetupResult"

  - id: "customer-profile-enrichment"
    name: "customer-profile-enrichment"
    type: "calculation-enrichment"
    description: "Enrich customer profiles using external data source references"
    condition: "#profileType != null && #profileScope != null"
    calculation-config:
      expression: "'Customer Profile Enrichment: ' + #profileType + ' with scope ' + #profileScope + ' (Enriched: ' + T(java.time.LocalDateTime).now().toString() + ')'"
      result-field: "customerProfileEnrichmentResult"
    field-mappings:
      - source-field: "customerProfileEnrichmentResult"
        target-field: "customerProfileEnrichmentResult"

  - id: "settlement-instruction-enrichment"
    name: "settlement-instruction-enrichment"
    type: "calculation-enrichment"
    description: "Enrich settlement instructions using external data sources"
    condition: "#instructionType != null && #instructionScope != null"
    calculation-config:
      expression: "'Settlement Instruction Enrichment: ' + #instructionType + ' with scope ' + #instructionScope + ' (Processed: ' + T(java.time.LocalDateTime).now().toString() + ')'"
      result-field: "settlementInstructionEnrichmentResult"
    field-mappings:
      - source-field: "settlementInstructionEnrichmentResult"
        target-field: "settlementInstructionEnrichmentResult"

  - id: "summary"
    name: "summary"
    type: "calculation-enrichment"
    description: "Generate comprehensive external data source reference summary"
    condition: "#approach != null"
    calculation-config:
      expression: "'External Data Source Reference Summary: Processing completed using ' + #approach + ' (Summary: ' + T(java.time.LocalDateTime).now().toString() + ')'"
      result-field: "externalDataSourceReferenceSummary"
    field-mappings:
      - source-field: "externalDataSourceReferenceSummary"
        target-field: "externalDataSourceReferenceSummary"
