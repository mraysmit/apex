name: "Data Source Verifier Configuration"
description: "APEX-compliant data source verifier processing with real business logic"
version: "1.0"

enrichments:
  - id: "inline-dataset-verification"
    name: "inline-dataset-verification"
    type: "calculation-enrichment"
    description: "Verify inline dataset configuration with embedded YAML structure validation"
    condition: "#inlineVerificationType != null && #inlineVerificationScope != null"
    calculation-config:
      expression: "'Inline Dataset Verification: ' + #inlineVerificationType + ' with scope ' + #inlineVerificationScope + ' (Verified: ' + T(java.time.LocalDateTime).now().toString() + ')'"
      result-field: "inlineDatasetVerificationResult"
    field-mappings:
      - source-field: "inlineDatasetVerificationResult"
        target-field: "inlineDatasetVerificationResult"

  - id: "postgresql-verification"
    name: "postgresql-verification"
    type: "calculation-enrichment"
    description: "Verify PostgreSQL database connectivity and table structure validation"
    condition: "#postgresqlVerificationType != null && #postgresqlVerificationScope != null"
    calculation-config:
      expression: "'PostgreSQL Verification: ' + #postgresqlVerificationType + ' with scope ' + #postgresqlVerificationScope + ' (Verified: ' + T(java.time.LocalDateTime).now().toString() + ')'"
      result-field: "postgresqlVerificationResult"
    field-mappings:
      - source-field: "postgresqlVerificationResult"
        target-field: "postgresqlVerificationResult"

  - id: "external-yaml-verification"
    name: "external-yaml-verification"
    type: "calculation-enrichment"
    description: "Verify external YAML file existence and structure validation"
    condition: "#externalVerificationType != null && #externalVerificationScope != null"
    calculation-config:
      expression: "'External YAML Verification: ' + #externalVerificationType + ' with scope ' + #externalVerificationScope + ' (Verified: ' + T(java.time.LocalDateTime).now().toString() + ')'"
      result-field: "externalYamlVerificationResult"
    field-mappings:
      - source-field: "externalYamlVerificationResult"
        target-field: "externalYamlVerificationResult"

  - id: "summary"
    name: "summary"
    type: "calculation-enrichment"
    description: "Generate comprehensive data source verifier summary with verification audit trail"
    condition: "#approach != null"
    calculation-config:
      expression: "'Data Source Verifier Summary: Processing completed using ' + #approach + ' (Summary: ' + T(java.time.LocalDateTime).now().toString() + ')'"
      result-field: "dataSourceVerifierSummary"
    field-mappings:
      - source-field: "dataSourceVerifierSummary"
        target-field: "dataSourceVerifierSummary"
