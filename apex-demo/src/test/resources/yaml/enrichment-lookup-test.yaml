metadata:
  id: "enrichment-lookup-test"
  name: "Enrichment Document Lookup Test"
  version: "1.0.0"
  description: "Test enrichment document type with lookup enrichments"
  type: "enrichment"
  author: "apex-test-suite@example.com"
  created-by: "APEX Test Suite"
  created-date: "2025-01-14"
  business-domain: "Testing"

enrichments:
  - id: "currency-lookup"
    name: "Currency Lookup Enrichment"
    type: "lookup-enrichment"
    description: "Lookup currency information by currency code"
    condition: "#currencyCode != null"
    lookup-config:
      lookup-key: "#currencyCode"
      lookup-dataset:
        type: "inline"
        key-field: "code"
        data:
          - code: "USD"
            name: "US Dollar"
            symbol: "$"
            country: "United States"
          - code: "EUR"
            name: "Euro"
            symbol: "€"
            country: "European Union"
          - code: "GBP"
            name: "British Pound"
            symbol: "£"
            country: "United Kingdom"
    field-mappings:
      - source-field: "name"
        target-field: "currencyName"
      - source-field: "symbol"
        target-field: "currencySymbol"
      - source-field: "country"
        target-field: "currencyCountry"

  - id: "instrument-lookup"
    name: "Instrument Type Lookup"
    type: "lookup-enrichment"
    description: "Lookup instrument type by instrument ID"
    condition: "#instrumentId != null"
    lookup-config:
      lookup-key: "#instrumentId"
      lookup-dataset:
        type: "inline"
        key-field: "id"
        data:
          - id: "US912828XG93"
            type: "TREASURY_NOTE"
            maturity: "10Y"
            issuer: "US_TREASURY"
          - id: "DE0001102309"
            type: "GOVERNMENT_BOND"
            maturity: "30Y"
            issuer: "GERMAN_GOVERNMENT"
    field-mappings:
      - source-field: "type"
        target-field: "instrumentType"
      - source-field: "maturity"
        target-field: "instrumentMaturity"
      - source-field: "issuer"
        target-field: "instrumentIssuer"
