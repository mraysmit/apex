metadata:
  id: "rule-config-enrichments-test"
  name: "Rule-Config Enrichments Test"
  version: "1.0.0"
  description: "Test rule-config document type with enrichments section only"
  type: "rule-config"
  author: "apex-test-suite@example.com"
  created-by: "APEX Test Suite"
  created-date: "2025-01-14"
  business-domain: "Testing"

enrichments:
  - id: "lei-lookup"
    name: "LEI Lookup Enrichment"
    type: "lookup-enrichment"
    description: "Lookup Legal Entity Identifier for counterparty"
    condition: "#counterpartyName != null"
    lookup-config:
      lookup-key: "#counterpartyName"
      lookup-dataset:
        type: "inline"
        key-field: "name"
        data:
          - name: "JPMorgan Chase"
            lei: "8EE8DF3643E15DBFDA05"
            jurisdiction: "US"
            entityType: "BANK"
          - name: "Goldman Sachs"
            lei: "784F5XWPLTWKTBV3E584"
            jurisdiction: "US"
            entityType: "INVESTMENT_BANK"
          - name: "Deutsche Bank"
            lei: "7LTWFZYICNSX8D621K86"
            jurisdiction: "DE"
            entityType: "BANK"
    field-mappings:
      - source-field: "lei"
        target-field: "counterpartyLei"
      - source-field: "jurisdiction"
        target-field: "counterpartyJurisdiction"
      - source-field: "entityType"
        target-field: "counterpartyType"

  - id: "trade-value-calculation"
    name: "Trade Value Calculation"
    type: "calculation-enrichment"
    description: "Calculate trade value from quantity and price"
    condition: "#quantity != null && #price != null"
    calculation-config:
      expression: "#quantity * #price"
      result-field: "tradeValue"
    field-mappings:
      - source-field: "tradeValue"
        target-field: "tradeValue"
