# ============================================================================
# APEX YAML Configuration File
# ============================================================================
# Used by: ORPHANED - No Java test currently uses this file
# Purpose: Integrated trade validator complex demonstration with comprehensive
#          complex trade validation processing, advanced validation scenarios,
#          and sophisticated trade processing using APEX validation capabilities
# Status: Available for integration with integrated trade validator complex tests
# ============================================================================

metadata:
  id: "integrated-trade-validator-complex-demo"
  name: "Integrated Trade Validator Complex Demo"
  version: "1.0.0"
  description: "APEX-compliant complex trade validation with real enrichment services"
  type: "rule-config"
  author: "apex.demo.team@company.com"
  created-date: "2024-12-24"
  tags: ["apex-demo", "validation", "trade-validator", "complex"]

# External data source for complex trade validation configurations
external-data-sources:
  - name: "settlement-validation-config"
    type: "external-data-config"
    source: "validation/trade-validation/settlement-validation-config.yaml"
    
  - name: "compliance-validation-config"
    type: "external-data-config"
    source: "validation/trade-validation/compliance-validation-config.yaml"
    
  - name: "lookup-services-config"
    type: "external-data-config"
    source: "validation/trade-validation/lookup-services-config.yaml"
    
  - name: "validation-rules-config"
    type: "external-data-config"
    source: "validation/trade-validation/validation-rules-config.yaml"
    
  - name: "trade-samples-config"
    type: "external-data-config"
    source: "validation/trade-validation/trade-samples-config.yaml"

# APEX enrichment processing for complex trade validation
enrichments:
  - id: "integrated-trade-validator-complex-demo-a"
    name: "settlement-validation"
    type: "lookup-enrichment"
    description: "Validate settlement parameters using data-driven configuration"
    enabled: true
    condition: "#validationType == 'settlement-validation' || #settlementType != null"
    lookup-config:
      lookup-key: "#settlementType != null ? #settlementType : 'default'"
      lookup-dataset:
        type: "inline"
        key-field: "type"
        data:
          - type: "default"
            result: "Settlement validation completed: Method validated, Location validated, Currency validated, Amount validated"
          - type: "dvp"
            result: "DVP Settlement validation completed: Delivery vs Payment validated, Settlement date confirmed"
          - type: "free"
            result: "Free Settlement validation completed: Free delivery validated, No payment required"
    field-mappings:
      - source-field: "result"
        target-field: "settlementValidationResult"

  - id: "integrated-trade-validator-complex-demo-b"
    name: "compliance-validation"
    type: "lookup-enrichment"
    description: "Validate compliance parameters using data-driven configuration"
    enabled: true
    condition: "#validationType == 'compliance-validation' || #complianceType != null"
    lookup-config:
      lookup-key: "#complianceType != null ? #complianceType : 'default'"
      lookup-dataset:
        type: "inline"
        key-field: "type"
        data:
          - type: "default"
            result: "Compliance validation completed: Regulatory requirements validated, Risk limits checked"
          - type: "mifid"
            result: "MiFID II Compliance validation completed: Best execution validated, Client categorization confirmed"
          - type: "dodd-frank"
            result: "Dodd-Frank Compliance validation completed: Swap reporting validated, Clearing requirements checked"
    field-mappings:
      - source-field: "result"
        target-field: "complianceValidationResult"

  - id: "integrated-trade-validator-complex-demo-c"
    name: "lookup-service-validation"
    type: "lookup-enrichment"
    description: "Validate using lookup services with data-driven configuration"
    enabled: true
    condition: "#validationType == 'lookup-service-validation' || #lookupType != null"
    lookup-config:
      lookup-key: "#lookupServiceType != null ? #lookupServiceType : 'default'"
      lookup-dataset:
        type: "inline"
        key-field: "type"
        data:
          - type: "default"
            result: "Lookup service validation completed: Service connectivity validated, Data integrity checked"
          - type: "counterparty"
            result: "Counterparty lookup service validation completed: LEI validated, Credit rating checked"
          - type: "instrument"
            result: "Instrument lookup service validation completed: ISIN validated, Market data confirmed"
    field-mappings:
      - source-field: "result"
        target-field: "lookupServiceValidationResult"

  - id: "integrated-trade-validator-complex-demo-d"
    name: "validation-rules-processing"
    type: "lookup-enrichment"
    description: "Process validation rules using data-driven configuration"
    enabled: true
    condition: "#validationType == 'validation-rules' || #rulesType != null"
    lookup-config:
      lookup-key: "#ruleType != null ? #ruleType : 'default'"
      lookup-dataset:
        type: "inline"
        key-field: "type"
        data:
          - type: "default"
            result: "Validation rules processing completed: Business rules validated, Data quality checked"
          - type: "trade-limits"
            result: "Trade limits validation completed: Position limits checked, Risk thresholds validated"
          - type: "market-data"
            result: "Market data validation completed: Price validation, Volatility checks performed"
    field-mappings:
      - source-field: "result"
        target-field: "validationRulesResult"

  - id: "integrated-trade-validator-complex-demo-e"
    name: "trade-sample-validation"
    type: "lookup-enrichment"
    description: "Validate trade samples using data-driven configuration"
    enabled: true
    condition: "#validationType == 'trade-sample-validation' || #sampleType != null"
    lookup-config:
      lookup-key: "#sampleType != null ? #sampleType : 'default'"
      lookup-dataset:
        type: "inline"
        key-field: "type"
        data:
          - type: "default"
            result: "Trade sample validation completed: Sample data validated, Test scenarios executed"
          - type: "equity"
            result: "Equity trade sample validation completed: Stock trades validated, Dividend processing checked"
          - type: "fixed-income"
            result: "Fixed income trade sample validation completed: Bond trades validated, Coupon calculations checked"
    field-mappings:
      - source-field: "result"
        target-field: "tradeSampleValidationResult"

  - id: "integrated-trade-validator-complex-demo-f"
    name: "validation-summary"
    type: "calculation-enrichment"
    description: "Generate comprehensive validation summary"
    enabled: true
    condition: "true"
    calculation-config:
      expression: "'Complex trade validation completed: ' + (#validationType != null ? #validationType : 'unknown') + ' using real APEX services'"
      result-field: "validationSummary"
    field-mappings:
      - source-field: "validationSummary"
        target-field: "validationSummary"

# Complex trade validation categories
validation-categories:
  - category: "settlement-validation"
    description: "Settlement parameter validation and verification"
    processing-type: "real-apex-enrichment"
    validation-aspects:
      - "Settlement method validation"
      - "Settlement location verification"
      - "Currency code validation"
      - "Settlement amount checks"
    
  - category: "compliance-validation"
    description: "Compliance and regulatory validation"
    processing-type: "real-apex-enrichment"
    validation-aspects:
      - "High-risk country screening"
      - "Restricted entity checking"
      - "Regulatory compliance verification"
      - "AML/KYC validation"
    
  - category: "lookup-service-validation"
    description: "Reference data validation using lookup services"
    processing-type: "real-apex-enrichment"
    validation-aspects:
      - "Instrument type validation"
      - "Custodian verification"
      - "Account type validation"
      - "Risk rating assessment"
    
  - category: "validation-rules"
    description: "Complex validation rule processing"
    processing-type: "real-apex-enrichment"
    validation-aspects:
      - "Rule group processing"
      - "Nested rule validation"
      - "AND/OR logic evaluation"
      - "Conditional rule execution"
    
  - category: "trade-sample-validation"
    description: "Sample trade validation and testing"
    processing-type: "real-apex-enrichment"
    validation-aspects:
      - "Enhanced trade validation"
      - "Trade completeness checking"
      - "Data integrity validation"
      - "Business rule compliance"

# Validation performance settings
performance-settings:
  settlement-validation:
    validation-timeout: 5000
    parallel-validation: true
    cache-results: true
    
  compliance-validation:
    validation-timeout: 10000
    parallel-validation: false
    cache-results: true
    
  lookup-service-validation:
    validation-timeout: 3000
    parallel-validation: true
    cache-results: true
    
  validation-rules:
    rule-evaluation-timeout: 7000
    parallel-rule-execution: true
    rule-cache-size: 1000
    
  trade-sample-validation:
    sample-validation-timeout: 2000
    batch-validation: true
    validation-cache-size: 500

# Output configuration
output:
  include-input: true
  include-metadata: true
  format: "enhanced"
  validation-summary: true
  performance-metrics: true
  validation-details: true
