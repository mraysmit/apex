metadata:
  id: "field-type-conversions-test"
  name: "Field Type Conversions Test"
  version: "1.0.0"
  description: "Test data type conversions and transformations"
  type: "rule-config"
  author: "apex-test-suite@example.com"
  created-date: "2025-09-14"
  tags: ["apex-test", "field-transformation", "type-conversion", "data-types"]

# Data type conversion testing
enrichments:
  - id: "string-number-conversion"
    name: "string-number-conversion"
    type: "calculation-enrichment"
    description: "Convert string number to formatted string"
    condition: "#stringNumber != null"
    calculation-config:
      expression: "#stringNumber.toString()"
      result-field: "convertedNumber"
    field-mappings:
      - source-field: "convertedNumber"
        target-field: "convertedNumber"

  - id: "string-decimal-conversion"
    name: "string-decimal-conversion"
    type: "calculation-enrichment"
    description: "Convert string decimal to formatted decimal"
    condition: "#stringDecimal != null"
    calculation-config:
      expression: "T(java.lang.Double).parseDouble(#stringDecimal).toString()"
      result-field: "convertedDecimal"
    field-mappings:
      - source-field: "convertedDecimal"
        target-field: "convertedDecimal"

  - id: "string-boolean-conversion"
    name: "string-boolean-conversion"
    type: "calculation-enrichment"
    description: "Convert string boolean to uppercase text"
    condition: "#stringBoolean != null"
    calculation-config:
      expression: "#stringBoolean.toString().toUpperCase()"
      result-field: "convertedBoolean"
    field-mappings:
      - source-field: "convertedBoolean"
        target-field: "convertedBoolean"

  - id: "number-string-conversion"
    name: "number-string-conversion"
    type: "calculation-enrichment"
    description: "Convert number to string representation"
    condition: "#numberString != null"
    calculation-config:
      expression: "#numberString.toString()"
      result-field: "numberAsString"
    field-mappings:
      - source-field: "numberAsString"
        target-field: "numberAsString"

  - id: "decimal-formatting-conversion"
    name: "decimal-formatting-conversion"
    type: "calculation-enrichment"
    description: "Format decimal number as string"
    condition: "#decimalString != null"
    calculation-config:
      expression: "T(java.lang.String).format('%.2f', #decimalString)"
      result-field: "decimalFormatted"
    field-mappings:
      - source-field: "decimalFormatted"
        target-field: "decimalFormatted"

  - id: "boolean-text-conversion"
    name: "boolean-text-conversion"
    type: "calculation-enrichment"
    description: "Convert boolean to uppercase text"
    condition: "#booleanString != null"
    calculation-config:
      expression: "#booleanString.toString().toUpperCase()"
      result-field: "booleanText"
    field-mappings:
      - source-field: "booleanText"
        target-field: "booleanText"
