metadata:
  id: "field-multi-transformations-test"
  name: "Field Multi-Field Transformations Test"
  version: "1.0.0"
  description: "Test multi-field transformation operations combining multiple input fields"
  type: "rule-config"
  author: "apex-test-suite@example.com"
  created-date: "2025-09-14"
  tags: ["apex-test", "field-transformation", "multi-field", "composite-operations"]

# Multi-field transformation testing
enrichments:
  - id: "full-address-construction"
    name: "full-address-construction"
    type: "calculation-enrichment"
    description: "Construct full address from multiple address fields"
    condition: "#street != null && #city != null && #state != null && #zipCode != null"
    calculation-config:
      expression: "#street + ', ' + #city + ', ' + #state + ' ' + #zipCode"
      result-field: "fullAddress"
    field-mappings:
      - source-field: "fullAddress"
        target-field: "fullAddress"

  - id: "city-state-combination"
    name: "city-state-combination"
    type: "calculation-enrichment"
    description: "Combine city and state with proper formatting"
    condition: "#city != null && #state != null"
    calculation-config:
      expression: "#city + ', ' + #state"
      result-field: "cityState"
    field-mappings:
      - source-field: "cityState"
        target-field: "cityState"

  - id: "coordinates-formatting"
    name: "coordinates-formatting"
    type: "calculation-enrichment"
    description: "Format latitude and longitude coordinates"
    condition: "#latitude != null && #longitude != null"
    calculation-config:
      expression: "#latitude + ', ' + #longitude"
      result-field: "coordinates"
    field-mappings:
      - source-field: "coordinates"
        target-field: "coordinates"

  - id: "location-summary-construction"
    name: "location-summary-construction"
    type: "calculation-enrichment"
    description: "Create comprehensive location summary"
    condition: "#city != null && #state != null && #country != null"
    calculation-config:
      expression: "'Location: ' + #city + ', ' + #state + ', ' + #country"
      result-field: "locationSummary"
    field-mappings:
      - source-field: "locationSummary"
        target-field: "locationSummary"
