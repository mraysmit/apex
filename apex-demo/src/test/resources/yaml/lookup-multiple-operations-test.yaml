metadata:
  id: "lookup-multiple-operations-test"
  name: "Lookup Multiple Operations Test"
  version: "1.0.0"
  description: "Test multiple lookup operations in a single configuration"
  type: "rule-config"
  author: "apex-test-suite@example.com"
  created-date: "2025-09-14"
  tags: ["apex-test", "lookup-operations", "multiple-lookups", "comprehensive-testing"]

# Multiple lookup operations testing
enrichments:
  - id: "primary-currency-lookup"
    name: "primary-currency-lookup"
    type: "lookup-enrichment"
    description: "Lookup primary currency information"
    condition: "#primaryCurrency != null"
    lookup-config:
      lookup-key: "#primaryCurrency"
      lookup-dataset:
        type: "inline"
        key-field: "code"
        data:
          - code: "USD"
            name: "US Dollar"
            symbol: "$"
            region: "Americas"
          - code: "EUR"
            name: "Euro"
            symbol: "€"
            region: "Europe"
          - code: "GBP"
            name: "British Pound"
            symbol: "£"
            region: "Europe"
          - code: "JPY"
            name: "Japanese Yen"
            symbol: "¥"
            region: "Asia"
    field-mappings:
      - source-field: "name"
        target-field: "primaryCurrencyName"
      - source-field: "symbol"
        target-field: "primaryCurrencySymbol"
      - source-field: "region"
        target-field: "primaryCurrencyRegion"

  - id: "secondary-currency-lookup"
    name: "secondary-currency-lookup"
    type: "lookup-enrichment"
    description: "Lookup secondary currency information"
    condition: "#secondaryCurrency != null"
    lookup-config:
      lookup-key: "#secondaryCurrency"
      lookup-dataset:
        type: "inline"
        key-field: "code"
        data:
          - code: "USD"
            name: "US Dollar"
            symbol: "$"
            region: "Americas"
          - code: "EUR"
            name: "Euro"
            symbol: "€"
            region: "Europe"
          - code: "GBP"
            name: "British Pound"
            symbol: "£"
            region: "Europe"
          - code: "JPY"
            name: "Japanese Yen"
            symbol: "¥"
            region: "Asia"
    field-mappings:
      - source-field: "name"
        target-field: "secondaryCurrencyName"
      - source-field: "symbol"
        target-field: "secondaryCurrencySymbol"
      - source-field: "region"
        target-field: "secondaryCurrencyRegion"

  - id: "primary-instrument-lookup"
    name: "primary-instrument-lookup"
    type: "lookup-enrichment"
    description: "Lookup primary instrument information"
    condition: "#primaryInstrument != null"
    lookup-config:
      lookup-key: "#primaryInstrument"
      lookup-dataset:
        type: "inline"
        key-field: "id"
        data:
          - id: "US912828XG93"
            type: "TREASURY_NOTE"
            maturity: "10Y"
            country: "US"
          - id: "DE0001102309"
            type: "GOVERNMENT_BOND"
            maturity: "30Y"
            country: "DE"
          - id: "GB00B03MLX29"
            type: "GILT"
            maturity: "5Y"
            country: "GB"
          - id: "JP1234567890"
            type: "JGB"
            maturity: "20Y"
            country: "JP"
    field-mappings:
      - source-field: "type"
        target-field: "primaryInstrumentType"
      - source-field: "maturity"
        target-field: "primaryInstrumentMaturity"
      - source-field: "country"
        target-field: "primaryInstrumentCountry"

  - id: "secondary-instrument-lookup"
    name: "secondary-instrument-lookup"
    type: "lookup-enrichment"
    description: "Lookup secondary instrument information"
    condition: "#secondaryInstrument != null"
    lookup-config:
      lookup-key: "#secondaryInstrument"
      lookup-dataset:
        type: "inline"
        key-field: "id"
        data:
          - id: "US912828XG93"
            type: "TREASURY_NOTE"
            maturity: "10Y"
            country: "US"
          - id: "DE0001102309"
            type: "GOVERNMENT_BOND"
            maturity: "30Y"
            country: "DE"
          - id: "GB00B03MLX29"
            type: "GILT"
            maturity: "5Y"
            country: "GB"
          - id: "JP1234567890"
            type: "JGB"
            maturity: "20Y"
            country: "JP"
    field-mappings:
      - source-field: "type"
        target-field: "secondaryInstrumentType"
      - source-field: "maturity"
        target-field: "secondaryInstrumentMaturity"
      - source-field: "country"
        target-field: "secondaryInstrumentCountry"

  - id: "trading-venue-lookup"
    name: "trading-venue-lookup"
    type: "lookup-enrichment"
    description: "Lookup trading venue information"
    condition: "#tradingVenue != null"
    lookup-config:
      lookup-key: "#tradingVenue"
      lookup-dataset:
        type: "inline"
        key-field: "code"
        data:
          - code: "NYSE"
            name: "New York Stock Exchange"
            country: "United States"
            timezone: "EST"
          - code: "LSE"
            name: "London Stock Exchange"
            country: "United Kingdom"
            timezone: "GMT"
          - code: "TSE"
            name: "Tokyo Stock Exchange"
            country: "Japan"
            timezone: "JST"
          - code: "XETRA"
            name: "Deutsche Börse XETRA"
            country: "Germany"
            timezone: "CET"
    field-mappings:
      - source-field: "name"
        target-field: "venueName"
      - source-field: "country"
        target-field: "venueCountry"
      - source-field: "timezone"
        target-field: "venueTimezone"
