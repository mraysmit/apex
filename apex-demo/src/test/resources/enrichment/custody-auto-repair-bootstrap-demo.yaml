# APEX Custody Auto-Repair Bootstrap Demo Configuration
# Real APEX YAML configuration for custody auto-repair bootstrap processing
# Replaces all hardcoded custody auto-repair logic from CustodyAutoRepairBootstrap (@version 1.0)

metadata:
  id: "custody-auto-repair-bootstrap-demo"
  name: "Custody Auto-Repair Bootstrap Demo"
  version: "2.0.0"
  description: "APEX-compliant custody auto-repair bootstrap with real enrichment services"
  type: "bootstrap"
  author: "apex.demo.team@company.com"
  business-domain: "Custody and Safekeeping"
  created-by: "apex.demo.team@company.com"
  created-date: "2024-12-24"
  tags: ["custody", "auto-repair", "bootstrap", "enrichment", "demo"]

# External data source for custody auto-repair bootstrap configurations
external-data-sources:
  - name: "standing-instructions-config"
    type: "external-data-config"
    source: "enrichment/custody-bootstrap/standing-instructions-config.yaml"
    
  - name: "settlement-scenarios-config"
    type: "external-data-config"
    source: "enrichment/custody-bootstrap/settlement-scenarios-config.yaml"
    
  - name: "auto-repair-rules-config"
    type: "external-data-config"
    source: "enrichment/custody-bootstrap/auto-repair-rules-config.yaml"

# APEX enrichment processing for custody auto-repair bootstrap
enrichments:
  - id: "standing-instructions-processing"
    name: "standing-instructions-processing"
    type: "lookup-enrichment"
    description: "Process standing instructions using data-driven configuration"
    condition: "#bootstrapType == 'standing-instructions-processing'"
    lookup-config:
      lookup-key: "#instructionType"
      lookup-dataset:
        type: "inline"
        key-field: "type"
        data:
          - type: "client-level-instructions"
            result: "Client-level standing instructions processed"
          - type: "default"
            result: "Default standing instructions processed"
    field-mappings:
      - source-field: "result"
        target-field: "standingInstructionsResult"

  - id: "settlement-scenarios-processing"
    name: "settlement-scenarios-processing"
    type: "lookup-enrichment"
    description: "Process settlement scenarios using data-driven configuration"
    condition: "#bootstrapType == 'settlement-scenarios-processing'"
    lookup-config:
      lookup-key: "#scenarioType"
      lookup-dataset:
        type: "inline"
        key-field: "type"
        data:
          - type: "standard-settlement-scenarios"
            result: "Standard settlement scenarios processed"
          - type: "default"
            result: "Default settlement scenarios processed"
    field-mappings:
      - source-field: "result"
        target-field: "settlementScenariosResult"

  - id: "auto-repair-rules-processing"
    name: "auto-repair-rules-processing"
    type: "lookup-enrichment"
    description: "Process auto-repair rules using data-driven configuration"
    condition: "#bootstrapType == 'auto-repair-rules-processing'"
    lookup-config:
      lookup-key: "#ruleType"
      lookup-dataset:
        type: "inline"
        key-field: "type"
        data:
          - type: "field-completion-rules"
            result: "Field completion rules processed"
          - type: "default"
            result: "Default auto-repair rules processed"
    field-mappings:
      - source-field: "result"
        target-field: "autoRepairRulesResult"
    
  - id: "custody-auto-repair-summary"
    name: "custody-auto-repair-summary"
    type: "field-enrichment"
    description: "Generate custody auto-repair bootstrap summary"
    condition: "true"
    field-mappings:
      - source-field: "bootstrapType"
        target-field: "custodyAutoRepairSummary"
        expression: "'Custody auto-repair bootstrap completed: ' + (#bootstrapType != null ? #bootstrapType : 'unknown') + ' using real APEX services'"

# Bootstrap processing categories
processing-categories:
  - category: "standing-instructions-processing"
    description: "Standing instructions creation and management"
    processing-type: "real-apex-enrichment"
    instruction-levels:
      - "Client-level standing instructions"
      - "Market-level standing instructions"
      - "Instrument-level standing instructions"
      - "Global default standing instructions"
    
  - category: "settlement-scenarios-processing"
    description: "Settlement scenarios processing and validation"
    processing-type: "real-apex-enrichment"
    scenario-types:
      - "Standard settlement scenarios"
      - "Missing field scenarios"
      - "High-value transaction scenarios"
      - "Exception handling scenarios"
    
  - category: "auto-repair-rules-processing"
    description: "Auto-repair rules processing and execution"
    processing-type: "real-apex-enrichment"
    repair-aspects:
      - "Field completion rules"
      - "Standing instruction matching"
      - "Risk assessment rules"
      - "Audit trail generation"

# Custody processing patterns
processing-patterns:
  asian-markets-pattern:
    pattern-name: "Asian Markets Processing"
    description: "Pattern for processing Asian market custody operations"
    supported-markets: ["JAPAN", "HONG_KONG", "SINGAPORE", "KOREA"]
    processing-steps:
      - "Market-specific validation"
      - "Local custodian assignment"
      - "Settlement method determination"
      - "Regulatory compliance check"
    
  premium-client-pattern:
    pattern-name: "Premium Client Processing"
    description: "Pattern for processing premium client custody operations"
    client-tiers: ["PREMIUM", "INSTITUTIONAL", "PRIVATE_WEALTH"]
    processing-steps:
      - "Enhanced service level validation"
      - "Dedicated custodian assignment"
      - "Priority settlement processing"
      - "Specialized reporting requirements"
    
  high-value-transaction-pattern:
    pattern-name: "High-Value Transaction Processing"
    description: "Pattern for processing high-value custody transactions"
    value-thresholds: ["10000000", "50000000", "100000000"]
    processing-steps:
      - "Enhanced due diligence"
      - "Manual review requirements"
      - "Additional approval workflows"
      - "Enhanced audit trails"

# Performance settings
performance-settings:
  standing-instructions-processing:
    processing-timeout: 8000
    parallel-processing: true
    cache-results: true
    
  settlement-scenarios-processing:
    processing-timeout: 5000
    parallel-processing: false
    scenario-intensive: true
    
  auto-repair-rules-processing:
    processing-timeout: 10000
    parallel-processing: true
    rule-optimization: true

# Demonstration scenarios
demonstration-scenarios:
  comprehensive-auto-repair-bootstrap:
    scenario-name: "Comprehensive Auto-Repair Bootstrap"
    description: "Demonstrate comprehensive custody auto-repair bootstrap"
    steps:
      - "Load auto-repair bootstrap configurations"
      - "Process standing instructions"
      - "Process settlement scenarios"
      - "Process auto-repair rules"
      - "Generate bootstrap results"
    expected-outcome: "Successful comprehensive auto-repair bootstrap"
    
  standing-instructions-management:
    scenario-name: "Standing Instructions Management"
    description: "Demonstrate standing instructions creation and management"
    steps:
      - "Load standing instructions configurations"
      - "Create client-level standing instructions"
      - "Create market-level standing instructions"
      - "Create instrument-level standing instructions"
      - "Generate standing instructions results"
    expected-outcome: "Successful standing instructions management"
    
  settlement-auto-repair:
    scenario-name: "Settlement Auto-Repair Processing"
    description: "Demonstrate settlement auto-repair processing"
    steps:
      - "Load settlement auto-repair configurations"
      - "Process standard settlement scenarios"
      - "Process missing field scenarios"
      - "Process high-value transaction scenarios"
      - "Generate auto-repair results"
    expected-outcome: "Successful settlement auto-repair processing"

# Custody operations configuration
custody-operations:
  settlement-instructions:
    instruction-type: "Settlement Instructions"
    description: "Custody settlement instructions for Asian markets"
    supported-markets:
      - "Japan"
      - "Hong Kong"
      - "Singapore"
      - "Korea"
    instruction-characteristics:
      - "DVP settlement support"
      - "Multi-currency processing"
      - "Cross-border settlement"
      - "Regulatory compliance"
    settlement-types:
      - "Delivery vs Payment (DVP)"
      - "Free of Payment (FOP)"
      - "Receipt vs Payment (RVP)"

# Quality assurance
quality-assurance:
  bootstrap-reliability:
    - "Bootstrap process must be deterministic"
    - "Standing instructions must be accurate"
    - "Auto-repair rules must be comprehensive"
    - "Settlement scenarios must be realistic"
    
  custody-accuracy:
    - "Custody operations must be precise"
    - "Settlement instructions must be correct"
    - "Risk assessments must be comprehensive"
    - "Regulatory compliance must be maintained"
    
  performance-requirements:
    - "Bootstrap time must be reasonable"
    - "Memory usage must be controlled"
    - "Database operations must be efficient"
    - "Parallel processing must be thread-safe"

# Output configuration
output:
  include-input: true
  include-metadata: true
  format: "enhanced"
  bootstrap-summary: true
  performance-metrics: true
  standing-instructions-details: true
  settlement-details: true
  auto-repair-analysis: true
