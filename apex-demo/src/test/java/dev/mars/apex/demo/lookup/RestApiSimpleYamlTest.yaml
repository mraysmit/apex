# REST API Simple YAML Test Configuration
# The simplest possible YAML for REST API lookup validation

metadata:
  id: "rest-api-simple-yaml-test"
  name: "REST API Simple YAML Test"
  version: "1.0.0"
  description: "The simplest possible YAML configuration for REST API lookup validation"
  type: "enrichment"
  author: "apex.demo.team@company.com"

data-sources:
  - name: "test-api"
    type: "rest-api"
    connection:
      base-url: "http://localhost:8080"
    endpoints:
      currency-lookup: "/api/currency/{key}"
    cache:
      enabled: true          #  Enable caching
      ttlSeconds: 600        #  10 minutes TTL
      maxIdleSeconds: 300    #  5 minutes max idle time
      maxSize: 1000          #  Max 1000 entries (LRU eviction)
      keyPrefix: "test"      #  Cache key prefix

enrichments:
  - id: "simple-lookup"
    type: "lookup-enrichment"
    condition: "#currencyCode != null"
    lookup-config:
      lookup-key: "#currencyCode"
      lookup-dataset:
        type: "rest-api"
        data-source-ref: "test-api"
        operation-ref: "currency-lookup"
    field-mappings:
      - source-field: "name"
        target-field: "currencyName"
        required: false
