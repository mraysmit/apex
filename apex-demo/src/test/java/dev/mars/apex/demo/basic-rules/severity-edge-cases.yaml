# ============================================================================
# APEX YAML Configuration File - Severity Edge Cases
# ============================================================================
# Purpose: Test edge cases and boundary conditions for severity handling
#          including case sensitivity, whitespace, and special scenarios
# Used by: SeverityEdgeCasesTest.java
# ============================================================================

metadata:
  name: "Severity Edge Cases Test"
  version: "1.0.0"
  description: "Test configuration for severity edge cases and boundary conditions"

rules:
  # Test Case 1: Severity with leading/trailing whitespace (should be trimmed)
  - id: "whitespace-severity-test"
    name: "Whitespace Severity Test"
    condition: "true"
    message: "Testing severity with whitespace"
    severity: " ERROR "
    priority: 1

  # Test Case 2: Mixed case severity (should be normalized)
  - id: "mixed-case-error"
    name: "Mixed Case Error"
    condition: "true"
    message: "Testing mixed case ERROR severity"
    severity: "Error"
    priority: 1

  # Test Case 3: Lowercase severity (should be normalized)
  - id: "lowercase-warning"
    name: "Lowercase Warning"
    condition: "true"
    message: "Testing lowercase WARNING severity"
    severity: "warning"
    priority: 2

  # Test Case 4: Uppercase INFO (should work as-is)
  - id: "uppercase-info"
    name: "Uppercase Info"
    condition: "true"
    message: "Testing uppercase INFO severity"
    severity: "INFO"
    priority: 3

  # Test Case 5: Rule with very long message and severity
  - id: "long-message-rule"
    name: "Long Message Rule"
    condition: "#longField != null && #longField.length() > 1000"
    message: "This is a very long message that tests how severity handling works with extensive message content that might span multiple lines and contain various special characters and formatting elements to ensure robust severity processing"
    severity: "WARNING"
    priority: 2

  # Test Case 6: Rule with special characters in condition
  - id: "special-chars-condition"
    name: "Special Characters Condition"
    condition: "#email != null && #email.matches('^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$')"
    message: "Email validation with regex and ERROR severity"
    severity: "ERROR"
    priority: 1

  # Test Case 7: Rule with complex SpEL expression
  - id: "complex-spel-expression"
    name: "Complex SpEL Expression"
    condition: "#data != null && #data.containsKey('amount') && #data['amount'] instanceof T(java.lang.Number) && #data['amount'].doubleValue() > 0"
    message: "Complex SpEL expression with INFO severity"
    severity: "INFO"
    priority: 3

  # Test Case 8: Rule with null-safe operations
  - id: "null-safe-operations"
    name: "Null Safe Operations"
    condition: "#customer?.address?.zipCode != null && #customer.address.zipCode.length() == 5"
    message: "Null-safe operations with WARNING severity"
    severity: "WARNING"
    priority: 2

  # Test Case 9: Rule with mathematical operations
  - id: "mathematical-operations"
    name: "Mathematical Operations"
    condition: "#principal != null && #rate != null && #time != null && (#principal * #rate * #time / 100) > 1000"
    message: "Mathematical calculation result exceeds threshold"
    severity: "ERROR"
    priority: 1

  # Test Case 10: Rule with string operations and severity
  - id: "string-operations"
    name: "String Operations"
    condition: "#name != null && #name.trim().toUpperCase().startsWith('VIP')"
    message: "VIP customer detected with special processing"
    severity: "INFO"
    priority: 3

rule-groups:
  # Test Case 1: Rule group with edge case rules
  - id: "edge-case-validation-group"
    name: "Edge Case Validation Group"
    description: "AND group containing rules with edge case severities"
    operator: "AND"
    rule-ids:
      - "whitespace-severity-test"
      - "mixed-case-error"
      - "lowercase-warning"

  # Test Case 2: Complex processing group
  - id: "complex-processing-group"
    name: "Complex Processing Group"
    description: "OR group with complex conditions and mixed severities"
    operator: "OR"
    rule-ids:
      - "special-chars-condition"
      - "complex-spel-expression"
      - "null-safe-operations"

  # Test Case 3: Mathematical and string operations group
  - id: "operations-group"
    name: "Operations Group"
    description: "AND group testing mathematical and string operations with severity"
    operator: "AND"
    rule-ids:
      - "mathematical-operations"
      - "string-operations"
      - "long-message-rule"

  # Test Case 4: Comprehensive edge case group
  - id: "comprehensive-edge-case-group"
    name: "Comprehensive Edge Case Group"
    description: "OR group with all edge case scenarios"
    operator: "OR"
    rule-ids:
      - "whitespace-severity-test"
      - "complex-spel-expression"
      - "mathematical-operations"
      - "uppercase-info"
