# ============================================================================
# APEX YAML Configuration File - Default Severity Behavior Testing
# ============================================================================
# Purpose: Test default severity behavior when severity field is omitted
#          or not explicitly specified in rule configurations
# Used by: SeverityDefaultBehaviorTest.java
# ============================================================================

metadata:
  name: "Default Severity Behavior Test"
  version: "1.0.0"
  description: "Test configuration for default severity behavior when severity is not specified"

rules:
  # Test Case 1: Rule with no severity field - should default to "INFO"
  - id: "no-severity-field-1"
    name: "No Severity Field Test 1"
    condition: "#amount != null && #amount > 100"
    message: "Amount {{#amount}} processed without explicit severity"
    priority: 1
    # NOTE: severity field intentionally omitted

  # Test Case 2: Another rule with no severity field - should default to "INFO"
  - id: "no-severity-field-2"
    name: "No Severity Field Test 2"
    condition: "#customerId != null"
    message: "Customer {{#customerId}} validation without explicit severity"
    priority: 2
    # NOTE: severity field intentionally omitted

  # Test Case 3: Rule with no severity field - should default to "INFO"
  - id: "no-severity-field-3"
    name: "No Severity Field Test 3"
    condition: "#status == 'ACTIVE'"
    message: "Status validation without explicit severity"
    priority: 3
    # NOTE: severity field intentionally omitted

  # Test Case 4: Mixed configuration - some with severity, some without
  - id: "explicit-error-severity"
    name: "Explicit Error Severity"
    condition: "#errorFlag == true"
    message: "Explicit ERROR severity rule for comparison"
    severity: "ERROR"
    priority: 1

  # Test Case 5: Rule with no severity field after explicit severity rule
  - id: "no-severity-after-explicit"
    name: "No Severity After Explicit"
    condition: "#warningFlag == true"
    message: "No severity field after explicit severity rule"
    priority: 2
    # NOTE: severity field intentionally omitted

  # Test Case 6: Explicit WARNING severity for comparison
  - id: "explicit-warning-severity"
    name: "Explicit Warning Severity"
    condition: "#warningCondition == true"
    message: "Explicit WARNING severity rule for comparison"
    severity: "WARNING"
    priority: 2

  # Test Case 7: Rule with no severity field after WARNING
  - id: "no-severity-after-warning"
    name: "No Severity After Warning"
    condition: "#infoFlag == true"
    message: "No severity field after WARNING severity rule"
    priority: 3
    # NOTE: severity field intentionally omitted

  # Test Case 8: Explicit INFO severity for comparison
  - id: "explicit-info-severity"
    name: "Explicit Info Severity"
    condition: "#infoCondition == true"
    message: "Explicit INFO severity rule for comparison"
    severity: "INFO"
    priority: 3

  # Test Case 9: Final rule with no severity field
  - id: "final-no-severity"
    name: "Final No Severity"
    condition: "true"
    message: "Final rule without severity field"
    priority: 4
    # NOTE: severity field intentionally omitted

rule-groups:
  # Test Case 1: Rule group with only default severity rules
  - id: "default-severity-and-group"
    name: "Default Severity AND Group"
    description: "AND group containing only rules with default (omitted) severity"
    operator: "AND"
    rule-ids:
      - "no-severity-field-1"
      - "no-severity-field-2"
      - "no-severity-field-3"

  # Test Case 2: Rule group with only default severity rules (OR)
  - id: "default-severity-or-group"
    name: "Default Severity OR Group"
    description: "OR group containing only rules with default (omitted) severity"
    operator: "OR"
    rule-ids:
      - "no-severity-after-explicit"
      - "no-severity-after-warning"
      - "final-no-severity"

  # Test Case 3: Mixed rule group - explicit and default severities
  - id: "mixed-explicit-default-group"
    name: "Mixed Explicit Default Group"
    description: "AND group mixing explicit severity rules with default severity rules"
    operator: "AND"
    rule-ids:
      - "explicit-error-severity"
      - "no-severity-field-1"
      - "explicit-warning-severity"
      - "no-severity-field-2"

  # Test Case 4: Rule group testing default severity aggregation
  - id: "default-aggregation-test-group"
    name: "Default Aggregation Test Group"
    description: "OR group testing how default INFO severity aggregates with explicit severities"
    operator: "OR"
    rule-ids:
      - "no-severity-field-3"
      - "explicit-info-severity"
      - "final-no-severity"

  # Test Case 5: Complex mixed scenario
  - id: "comprehensive-default-test-group"
    name: "Comprehensive Default Test Group"
    description: "AND group with all combinations: ERROR, WARNING, INFO, and default"
    operator: "AND"
    rule-ids:
      - "explicit-error-severity"
      - "explicit-warning-severity"
      - "explicit-info-severity"
      - "no-severity-field-1"
