# ============================================================================
# APEX YAML Configuration File - Mixed Severity Rules
# ============================================================================
# Purpose: Test mixed severity levels within single configuration to verify
#          proper severity handling and isolation between different rule types
# Used by: SeverityMixedRulesTest.java
# ============================================================================

metadata:
  name: "Mixed Severity Rules Test"
  version: "1.0.0"
  description: "Test configuration with mixed severity levels in various combinations"

rules:
  # Financial validation rules with different severities
  - id: "account-balance-critical"
    name: "Account Balance Critical Check"
    condition: "#balance != null && #balance < 0"
    message: "CRITICAL: Account balance {{#balance}} is negative - immediate action required"
    severity: "ERROR"
    priority: 1

  - id: "account-balance-warning"
    name: "Account Balance Warning Check"
    condition: "#balance != null && #balance < 1000 && #balance >= 0"
    message: "WARNING: Account balance {{#balance}} is low - consider adding funds"
    severity: "WARNING"
    priority: 2

  - id: "account-balance-info"
    name: "Account Balance Info Check"
    condition: "#balance != null && #balance >= 1000"
    message: "INFO: Account balance {{#balance}} is sufficient for processing"
    severity: "INFO"
    priority: 3

  # Customer validation rules with escalating severities
  - id: "customer-age-error"
    name: "Customer Age Error Check"
    condition: "#age != null && #age < 18"
    message: "ERROR: Customer age {{#age}} is below minimum required age of 18"
    severity: "ERROR"
    priority: 1

  - id: "customer-age-warning"
    name: "Customer Age Warning Check"
    condition: "#age != null && #age >= 65"
    message: "WARNING: Customer age {{#age}} requires additional verification for senior services"
    severity: "WARNING"
    priority: 2

  - id: "customer-age-info"
    name: "Customer Age Info Check"
    condition: "#age != null && #age >= 18 && #age < 65"
    message: "INFO: Customer age {{#age}} is within standard processing range"
    severity: "INFO"
    priority: 3

  # Transaction validation with mixed severities
  - id: "transaction-limit-exceeded"
    name: "Transaction Limit Exceeded"
    condition: "#transactionAmount != null && #transactionAmount > 10000"
    message: "ERROR: Transaction amount {{#transactionAmount}} exceeds daily limit of 10,000"
    severity: "ERROR"
    priority: 1

  - id: "transaction-unusual-time"
    name: "Unusual Transaction Time"
    condition: "#transactionHour != null && (#transactionHour < 6 || #transactionHour > 22)"
    message: "WARNING: Transaction at hour {{#transactionHour}} is outside normal business hours"
    severity: "WARNING"
    priority: 2

  - id: "transaction-processed"
    name: "Transaction Processing Info"
    condition: "#transactionAmount != null && #transactionAmount > 0"
    message: "INFO: Transaction for amount {{#transactionAmount}} is being processed"
    severity: "INFO"
    priority: 3

rule-groups:
  # Group testing escalation pattern: INFO -> WARNING -> ERROR
  - id: "escalation-pattern-group"
    name: "Escalation Pattern Group"
    description: "OR group testing severity escalation from INFO to WARNING to ERROR"
    operator: "OR"
    rule-ids:
      - "account-balance-info"
      - "account-balance-warning"
      - "account-balance-critical"

  # Group testing mixed severity AND logic
  - id: "mixed-and-group"
    name: "Mixed Severity AND Group"
    description: "AND group with different severity rules - all must pass"
    operator: "AND"
    rule-ids:
      - "customer-age-info"
      - "transaction-unusual-time"
      - "account-balance-critical"

  # Group testing mixed severity OR logic
  - id: "mixed-or-group"
    name: "Mixed Severity OR Group"
    description: "OR group with different severity rules - any can trigger"
    operator: "OR"
    rule-ids:
      - "transaction-limit-exceeded"
      - "customer-age-warning"
      - "transaction-processed"

  # Group testing all three severity levels together
  - id: "comprehensive-mixed-group"
    name: "Comprehensive Mixed Severity Group"
    description: "AND group with ERROR, WARNING, and INFO rules for comprehensive testing"
    operator: "AND"
    rule-ids:
      - "transaction-limit-exceeded"
      - "customer-age-warning"
      - "transaction-processed"
