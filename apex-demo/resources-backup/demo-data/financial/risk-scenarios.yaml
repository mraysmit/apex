# Financial Demo - Risk Management Scenarios
# This file contains risk management test scenarios and configuration
# Business users can modify these scenarios to test different risk conditions

metadata:
  name: "Financial Services Demo - Risk Scenarios Dataset"
  version: "1.0"
  description: "Risk management scenarios for Financial services demonstrations (FinancialDemo.java)"
  type: "dataset"
  source: "generated"
  associated-demo: "FinancialDemo"
  file-purpose: "Provides risk scenario test data for financial validation and assessment"
  lastUpdated: "2025-07-28"
  author: "APEX Demo Team"

# Risk management test scenarios
riskScenarios:
  # Low risk scenario
  lowRisk:
    description: "Low risk trading scenario"
    clientRiskRating: "LOW"
    counterpartyRating: "AA-"
    marketVolatility: 0.08
    portfolioValue: 500000000.0
    var95: 3000000.0
    stressTestResult: 12000000.0
    concentrationRisk: 0.08
    expectedResult: "APPROVED"
    
  # Medium risk scenario
  mediumRisk:
    description: "Medium risk trading scenario"
    clientRiskRating: "MEDIUM"
    counterpartyRating: "A"
    marketVolatility: 0.15
    portfolioValue: 300000000.0
    var95: 5000000.0
    stressTestResult: 14000000.0
    concentrationRisk: 0.12
    expectedResult: "APPROVED_WITH_CONDITIONS"
    
  # High risk scenario
  highRisk:
    description: "High risk trading scenario"
    clientRiskRating: "HIGH"
    counterpartyRating: "BBB+"
    marketVolatility: 0.25
    portfolioValue: 200000000.0
    var95: 6000000.0
    stressTestResult: 18000000.0
    concentrationRisk: 0.18
    expectedResult: "REQUIRES_APPROVAL"
    
  # Extreme risk scenario
  extremeRisk:
    description: "Extreme risk scenario - should be rejected"
    clientRiskRating: "HIGH"
    counterpartyRating: "BB"
    marketVolatility: 0.35
    portfolioValue: 100000000.0
    var95: 8000000.0
    stressTestResult: 25000000.0
    concentrationRisk: 0.25
    expectedResult: "REJECTED"

# Risk rating configurations
riskRatings:
  LOW:
    description: "Low risk clients"
    maxTradeAmount: 10000000.0
    maxDailyExposure: 25000000.0
    requiredApprovals: 0
    monitoringLevel: "STANDARD"
    
  MEDIUM:
    description: "Medium risk clients"
    maxTradeAmount: 5000000.0
    maxDailyExposure: 15000000.0
    requiredApprovals: 1
    monitoringLevel: "ENHANCED"
    
  HIGH:
    description: "High risk clients"
    maxTradeAmount: 2000000.0
    maxDailyExposure: 8000000.0
    requiredApprovals: 2
    monitoringLevel: "INTENSIVE"

# Counterparty risk ratings
counterpartyRatings:
  "AAA":
    description: "Highest credit quality"
    creditLimit: 200000000.0
    riskWeight: 0.01
    
  "AA+":
    description: "Very high credit quality"
    creditLimit: 150000000.0
    riskWeight: 0.02
    
  "AA":
    description: "High credit quality"
    creditLimit: 125000000.0
    riskWeight: 0.03
    
  "AA-":
    description: "High credit quality"
    creditLimit: 100000000.0
    riskWeight: 0.04
    
  "A+":
    description: "Upper medium grade"
    creditLimit: 75000000.0
    riskWeight: 0.05
    
  "A":
    description: "Medium grade"
    creditLimit: 50000000.0
    riskWeight: 0.06
    
  "A-":
    description: "Medium grade"
    creditLimit: 40000000.0
    riskWeight: 0.07
    
  "BBB+":
    description: "Lower medium grade"
    creditLimit: 30000000.0
    riskWeight: 0.08
    
  "BBB":
    description: "Lower medium grade"
    creditLimit: 25000000.0
    riskWeight: 0.10
    
  "BBB-":
    description: "Lower medium grade"
    creditLimit: 20000000.0
    riskWeight: 0.12
    
  "BB+":
    description: "Speculative grade"
    creditLimit: 15000000.0
    riskWeight: 0.15
    
  "BB":
    description: "Speculative grade"
    creditLimit: 10000000.0
    riskWeight: 0.20

# Market volatility scenarios
volatilityScenarios:
  low:
    description: "Low market volatility"
    volatility: 0.08
    maxTradeAmount: 100000000.0
    additionalControls: false
    
  normal:
    description: "Normal market volatility"
    volatility: 0.15
    maxTradeAmount: 50000000.0
    additionalControls: false
    
  high:
    description: "High market volatility"
    volatility: 0.25
    maxTradeAmount: 10000000.0
    additionalControls: true
    
  extreme:
    description: "Extreme market volatility"
    volatility: 0.40
    maxTradeAmount: 1000000.0
    additionalControls: true
    tradingHalt: true

# Portfolio risk limits
portfolioLimits:
  # Value at Risk (VaR) limits
  var:
    var95Limit: 0.02  # 2% of portfolio value
    var99Limit: 0.03  # 3% of portfolio value
    
  # Stress test limits
  stressTest:
    maxLoss: 0.05  # 5% of portfolio value
    scenarios: ["2008_CRISIS", "COVID_2020", "TECH_BUBBLE"]
    
  # Concentration limits
  concentration:
    singleCounterparty: 0.15  # 15% max exposure to single counterparty
    singleSector: 0.25  # 25% max exposure to single sector
    singleCurrency: 0.40  # 40% max exposure to single currency
    singleInstrument: 0.10  # 10% max exposure to single instrument

# Risk monitoring alerts
riskAlerts:
  # Credit risk alerts
  creditRisk:
    - threshold: 0.80  # 80% of credit limit
      severity: "WARNING"
      action: "NOTIFY_RISK_MANAGER"
      
    - threshold: 0.95  # 95% of credit limit
      severity: "CRITICAL"
      action: "ESCALATE_TO_CRO"
      
  # Market risk alerts
  marketRisk:
    - threshold: 0.75  # 75% of VaR limit
      severity: "WARNING"
      action: "INCREASE_MONITORING"
      
    - threshold: 0.90  # 90% of VaR limit
      severity: "CRITICAL"
      action: "REDUCE_POSITIONS"
      
  # Operational risk alerts
  operationalRisk:
    - condition: "FAILED_TRADES > 5"
      severity: "WARNING"
      action: "INVESTIGATE_FAILURES"
      
    - condition: "SETTLEMENT_FAILURES > 3"
      severity: "CRITICAL"
      action: "HALT_TRADING"

# Risk calculation methods
riskCalculations:
  # VaR calculation parameters
  var:
    confidenceLevel: 0.95
    holdingPeriod: 1  # days
    historicalPeriod: 252  # trading days (1 year)
    method: "HISTORICAL_SIMULATION"
    
  # Stress test parameters
  stressTest:
    scenarios:
      - name: "2008_CRISIS"
        equityShock: -0.40
        bondShock: -0.15
        fxShock: 0.20
        
      - name: "COVID_2020"
        equityShock: -0.35
        bondShock: -0.10
        fxShock: 0.15
        
      - name: "TECH_BUBBLE"
        equityShock: -0.50
        bondShock: -0.05
        fxShock: 0.10

# Business rules for risk management
riskRules:
  creditRisk:
    - name: "credit-limit-check"
      expression: "#tradeAmount <= (#counterpartyCreditLimit - #currentExposure)"
      errorMessage: "Trade would exceed counterparty credit limit"
      severity: "ERROR"
      
    - name: "rating-threshold"
      expression: "#counterpartyRating in {'AAA', 'AA+', 'AA', 'AA-', 'A+', 'A', 'A-'} || #tradeAmount <= 10000000"
      errorMessage: "Large trades require investment grade counterparty"
      severity: "WARNING"
      
  marketRisk:
    - name: "var-limit-check"
      expression: "#portfolioVaR <= (#portfolioValue * 0.02)"
      errorMessage: "Portfolio VaR exceeds 2% limit"
      severity: "ERROR"
      
    - name: "volatility-check"
      expression: "#marketVolatility <= 0.20 || #tradeAmount <= 5000000"
      errorMessage: "Large trades restricted during high volatility"
      severity: "WARNING"
      
  concentrationRisk:
    - name: "counterparty-concentration"
      expression: "#counterpartyExposure <= (#portfolioValue * 0.15)"
      errorMessage: "Counterparty concentration exceeds 15% limit"
      severity: "ERROR"
      
    - name: "sector-concentration"
      expression: "#sectorExposure <= (#portfolioValue * 0.25)"
      errorMessage: "Sector concentration exceeds 25% limit"
      severity: "WARNING"

# Test cases for risk scenarios
testCases:
  # Credit risk test cases
  creditRiskTests:
    - scenario: "within-credit-limit"
      tradeAmount: 5000000.0
      counterpartyCreditLimit: 50000000.0
      currentExposure: 20000000.0
      expectedResult: "PASS"
      
    - scenario: "exceeds-credit-limit"
      tradeAmount: 35000000.0
      counterpartyCreditLimit: 50000000.0
      currentExposure: 20000000.0
      expectedResult: "FAIL"
      
  # Market risk test cases
  marketRiskTests:
    - scenario: "normal-var"
      portfolioValue: 500000000.0
      portfolioVaR: 8000000.0
      expectedResult: "PASS"
      
    - scenario: "excessive-var"
      portfolioValue: 500000000.0
      portfolioVaR: 15000000.0
      expectedResult: "FAIL"
      
  # Volatility test cases
  volatilityTests:
    - scenario: "low-volatility-large-trade"
      marketVolatility: 0.10
      tradeAmount: 50000000.0
      expectedResult: "PASS"
      
    - scenario: "high-volatility-large-trade"
      marketVolatility: 0.30
      tradeAmount: 50000000.0
      expectedResult: "FAIL"
