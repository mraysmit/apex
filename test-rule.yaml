metadata:
  id: "test-trading-rules"
  name: "Test Trading Rules"
  version: "1.0.0"
  description: "Simple test rules for APEX YAML validation"
  type: "rule-config"
  author: "test@example.com"
  created-date: "2025-01-06"
  tags: ["test", "validation", "trading"]

rules:
  - id: "amount-validation"
    name: "Amount Validation Rule"
    description: "Validates trade amount is positive"
    condition: "#data.amount > 0"
    message: "Trade amount must be positive"
    severity: "ERROR"
    priority: 100
    enabled: true
    
  - id: "currency-validation"
    name: "Currency Validation Rule"
    description: "Validates currency is provided"
    condition: "#data.currency != null && #data.currency != ''"
    message: "Currency must be specified"
    severity: "ERROR"
    priority: 200
    enabled: true

enrichments:
  - type: "lookup-enrichment"
    source: "currency-rates"
    lookup-key: "#data.currency"
    target-field: "exchangeRate"
    description: "Lookup current exchange rate"
    
  - type: "calculation-enrichment"
    expression: "#data.amount * #enriched.exchangeRate"
    target-field: "usdAmount"
    description: "Calculate USD equivalent amount"
