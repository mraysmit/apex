metadata:
  id: greeks-enrichment
  type: enrichment
  version: "1.0"
  description: "Greeks calculation enrichment"
  created-date: "2025-10-20"
  author: "APEX Test Generator"

# File-based dependencies following APEX patterns
dependencies:
  - "254-derivatives-data-config.yaml"
enrichments:
  - id: greeks-enrichment-enrichment-1
    name: "Primary Enrichment"
    type: lookup-enrichment
    description: "Primary enrichment for Greeks calculation enrichment"
    condition: "#symbol != null"
    lookup-config:
      lookup-key: "#symbol"
      lookup-dataset:
        type: external
        data-source-ref: primary-data-source
    field-mappings:
      - source-field: enrichedValue1
        target-field: enriched.field1
  - id: greeks-enrichment-enrichment-2
    name: "Secondary Enrichment"
    type: calculation-enrichment
    description: "Secondary enrichment for Greeks calculation enrichment"
    condition: "#value != null"
    calculation-config:
      expression: "#value * 1.1"
      result-field: calculatedValue
    field-mappings:
      - source-field: calculatedValue
        target-field: enriched.field2
