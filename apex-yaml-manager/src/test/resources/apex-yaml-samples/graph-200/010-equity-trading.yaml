metadata:
  id: equity-trading-scenario
  type: scenario
  version: "1.0"
  description: "Comprehensive equity trading scenario"
  created-date: "2025-10-20"
  business-domain: "Equity Trading"
  owner: "equity.trading@company.com"

# File-based dependencies following APEX patterns
rule-configurations:
  - "050-equity-validation.yaml"
  - "052-equity-risk.yaml"
  - "053-equity-settlement.yaml"

enrichment-refs:
  - "150-market-data-enrichment.yaml"
  - "151-counterparty-enrichment.yaml"
  - "152-instrument-enrichment.yaml"

config-files:
  - "250-market-data-config.yaml"
  - "251-reference-data-config.yaml"

scenario:
  scenario-id: equity-trading
  description: "Complete equity trading workflow with validation, enrichment, and settlement"

  classification-rule:
    condition: "#instrumentType != null && #instrumentType == 'EQUITY'"
    description: "Route equity trades to processing"

  processing-stages:
    - stage-name: validation
      description: "Validate equity trade data"
      config-file: "050-equity-validation.yaml"
      execution-order: 1
      failure-policy: terminate

    - stage-name: enrichment
      description: "Enrich with market data"
      config-file: "150-market-data-enrichment.yaml"
      execution-order: 2
      failure-policy: continue

    - stage-name: risk-assessment
      description: "Assess trade risk"
      config-file: "052-equity-risk.yaml"
      execution-order: 3
      failure-policy: continue

  data-types:
    - "EquityTrade"
    - "java.util.Map"
