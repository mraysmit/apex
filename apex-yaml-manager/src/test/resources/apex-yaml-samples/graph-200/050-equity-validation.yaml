metadata:
  id: equity-validation-rules
  type: rule-config
  version: "1.0"
  description: "Equity trade validation rules"
  created-date: "2025-10-20"
  author: "equity.team@company.com"

# File-based dependencies following APEX patterns
rule-configurations:
  - "100-common-validation-rules.yaml"
  - "101-market-data-rules.yaml"
  - "102-regulatory-rules.yaml"

rule-groups:
  - id: equity-basic-validation
    description: "Basic equity validation rules"
    rule-ids:
      - "equity-symbol-check"
      - "equity-quantity-check"
      - "equity-price-check"
  
  - id: equity-market-validation
    description: "Market-specific equity validation"
    rule-ids:
      - "market-hours-check"
      - "trading-halt-check"
      - "circuit-breaker-check"

rules:
  - id: equity-symbol-check
    description: "Validate equity symbol format"
    condition: "trade.symbol != null && trade.symbol.matches('[A-Z]{1,5}')"
    severity: "ERROR"
    
  - id: equity-quantity-check
    description: "Validate trade quantity"
    condition: "trade.quantity > 0 && trade.quantity <= 1000000"
    severity: "ERROR"
    
  - id: equity-price-check
    description: "Validate equity price"
    condition: "trade.price > 0 && trade.price < 10000"
    severity: "WARNING"
    
  - id: market-hours-check
    description: "Check if market is open"
    condition: "marketData.isMarketOpen(trade.symbol)"
    severity: "ERROR"
    
  - id: trading-halt-check
    description: "Check for trading halts"
    condition: "!marketData.isTradingHalted(trade.symbol)"
    severity: "ERROR"
    
  - id: circuit-breaker-check
    description: "Check circuit breaker status"
    condition: "!marketData.isCircuitBreakerTriggered()"
    severity: "WARNING"


