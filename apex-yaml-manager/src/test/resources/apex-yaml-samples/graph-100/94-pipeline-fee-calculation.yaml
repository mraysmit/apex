metadata:
  id: graph100-pipeline-fee-calculation
  name: Graph100 Pipeline Fee Calculation
  description: Trading fee calculation pipeline
  version: 0.3.0
  type: pipeline
  author: apex.demo@company.com
  created-date: 2025-10-20

pipeline:
  id: fee-calculation-pipeline
  name: Trading Fee Calculation
  description: Calculates trading fees and commissions

  stages:
    - name: "extract-trade-data"
      type: "extract"
      description: "Extract trade data for fee calculation"
      execution-order: 1
      config-file: "72-config-market-data.yaml"

    - name: "lookup-fee-schedule"
      type: "transform"
      description: "Lookup applicable fee schedule"
      execution-order: 2
      depends-on: ["extract-trade-data"]
      config-file: "89-dataset-fee-schedules.yaml"

    - name: "calculate-fees"
      type: "transform"
      description: "Calculate total fees and commissions"
      execution-order: 3
      depends-on: ["lookup-fee-schedule"]

    - name: "update-trade-record"
      type: "load"
      description: "Update trade record with calculated fees"
      execution-order: 4
      depends-on: ["calculate-fees"]

data-sources:
  - name: "trade-data"
    source: "72-config-market-data.yaml"
    enabled: true
  - name: "fee-schedules"
    source: "89-dataset-fee-schedules.yaml"
    enabled: true
