metadata:
  id: graph100-enrich-aggregator
  name: Graph100 Enrichment Aggregator
  description: Aggregator enrichment for fan-in pattern
  version: 0.3.0
  type: enrichment
  author: apex.demo@company.com
  created-date: 2025-10-20

enrichment:
  id: enrich-aggregator
  steps:
    - id: aggregate-results
      description: aggregate results from parallel branches
      when: "true"
      action: set
      params:
        field: aggregatedResults
        value: "COMPLETE"
    - id: set-aggregation-timestamp
      description: set aggregation timestamp
      when: "true"
      action: set
      params:
        field: aggregatedAt
        value: "T(java.time.Instant).now().toString()"
